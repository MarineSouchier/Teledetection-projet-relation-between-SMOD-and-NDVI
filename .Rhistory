library(raster)
library(dplyr)
library(mblm)
library(tiff)
library(rgdal)
library(rgeos)
setwd("C:/Users/souch/Desktop/TP Teledec/TP/Communes")
rastlist.2017.NDVI <- list.files(path = "S2_NDVI_CCVCMB", pattern='2017', all.files=TRUE, full.names=T)
rasters.2017.NDVI <- stack(lapply(rastlist.2017.NDVI, raster))
setwd("C:/Users/souch/Desktop/TP Teledec/TP/Communes")
rastlist.2017.NDVI <- list.files(path = "S2_NDVI_CCVCMB", pattern='2017', all.files=TRUE, full.names=T)
rasters.2017.NDVI <- stack(lapply(rastlist.2017.NDVI, raster))
rastlist.2017.NDVI <- list.files(path = "S2_NDVI_CCVCMB", pattern='2017', all.files=TRUE, full.names=T)
rasters.2017.NDVI <- stack(lapply(rastlist.2017.NDVI, raster))
rasters.2018.NDVI <- stack(lapply(rastlist.2018.NDVI, raster))
rastlist.2018.NDVI <- list.files(path = "S2_NDVI_CCVCMB", pattern='2018', all.files=TRUE, full.names=T)
rasters.2018.NDVI <- stack(lapply(rastlist.2018.NDVI, raster))
rastlist.2018.NDVI <- list.files(path = "S2_NDVI_CCVCMB", pattern='2018', all.files=TRUE, full.names=T)
rasters.2018.NDVI <- stack(lapply(rastlist.2018.NDVI, raster))
rastlist.2019.NDVI <- list.files(path = "S2_NDVI_CCVCMB", pattern='2019', all.files=TRUE, full.names=T)
rasters.2019.NDVI <- stack(lapply(rastlist.2019.NDVI, raster))
rastlist.2019.NDVI <- list.files(path = "S2_NDVI_CCVCMB", pattern='2019', all.files=TRUE, full.names=T)
rasters.2019.NDVI <- stack(lapply(rastlist.2019.NDVI, raster))
rastlist.2020.NDVI <- list.files(path = "S2_NDVI_CCVCMB", pattern='2020', all.files=TRUE, full.names=T)
rasters.2020.NDVI <- stack(lapply(rastlist.2020.NDVI, raster))
setwd("C:/Users/souch/Desktop/TP Teledec/TP/Communes")
rastlist.2017.NDVI <- list.files(path = "S2_NDVI_CCVCMB", pattern='2017', all.files=TRUE, full.names=T)
rasters.2017.NDVI <- stack(lapply(rastlist.2017.NDVI, raster))
rastlist.2017.NDVI <- list.files(path = "S2_NDVI_CCVCMB", pattern='2017', all.files=TRUE, full.names=T)
rasters.2017.NDVI <- stack(lapply(rastlist.2017.NDVI, raster))
rastlist.2018.NDVI <- list.files(path = "S2_NDVI_CCVCMB", pattern='2018', all.files=TRUE, full.names=T)
rasters.2018.NDVI <- stack(lapply(rastlist.2018.NDVI, raster))
rastlist.2019.NDVI <- list.files(path = "S2_NDVI_CCVCMB", pattern='2019', all.files=TRUE, full.names=T)
rasters.2019.NDVI <- stack(lapply(rastlist.2019.NDVI, raster))
rastlist.2020.NDVI <- list.files(path = "S2_NDVI_CCVCMB", pattern='2020', all.files=TRUE, full.names=T)
rasters.2020.NDVI <- stack(lapply(rastlist.2020.NDVI, raster))
rastlist.2021.NDVI <- list.files(path = "S2_NDVI_CCVCMB", pattern='2021', all.files=TRUE, full.names=T)
rasters.2021.NDVI <- stack(lapply(rastlist.2021.NDVI, raster))
rasters.2020.NDVI
knitr::opts_knit$set(root.dir = 'C:/Users/souch/Desktop/TP Teledec/TP/Communes')
CCVCMB <- shapefile("CC_Vallee_CHAMONIX.shp")
CCVCMB <- spTransform(CCVCMB, CRS = crs("+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs "))
knitr::opts_knit$set(root.dir = 'C:/Users/souch/Desktop/TP Teledec/TP/Communes')
CCVCMB <- shapefile("CC_Vallee_CHAMONIX.shp")
CCVCMB <- spTransform(CCVCMB, CRS = crs("+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs "))
knitr::opts_knit$set(root.dir = 'C:/Users/souch/Desktop/TP Teledec/TP/Communes')
CCVCMB <- shapefile("CC_Vallee_CHAMONIX.shp")
CCVCMB <- spTransform(CCVCMB, CRS = crs("+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs "))
knitr::opts_knit$set(root.dir = 'C:/Users/souch/Desktop/TP Teledec/TP/Communes')
CCVCMB <- shapefile("CC_Vallee_CHAMONIX.shp")
CCVCMB <- spTransform(CCVCMB, CRS = crs("+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs "))
knitr::opts_knit$set(root.dir = 'C:/Users/souch/Desktop/TP Teledec/TP/S2_NDVI_CCVCMB')
SMOD_17 <- raster("SMOD_CCVCMB_2017.tif")
knitr::opts_knit$set(root.dir = 'C:/Users/souch/Desktop/TP Teledec/TP/S2_NDVI_CCVCMB')
SMOD_17 <- raster("SMOD_CCVCMB_2017.tif")
SMOD_18 <- raster("SMOD_CCVCMB_2018.tif")
SMOD_19 <- raster("SMOD_CCVCMB_2019.tif")
SMOD_20 <- raster("SMOD_CCVCMB_2020.tif")
SMOD_21 <- raster("SMOD_CCVCMB_2021.tif")
knitr::opts_knit$set(root.dir = 'C:/Users/souch/Desktop/TP Teledec/TP/S2_NDVI_CCVCMB')
SMOD_17 <- raster("SMOD_CCVCMB_2017.tif")
SMOD_18 <- raster("SMOD_CCVCMB_2018.tif")
SMOD_19 <- raster("SMOD_CCVCMB_2019.tif")
SMOD_20 <- raster("SMOD_CCVCMB_2020.tif")
SMOD_21 <- raster("SMOD_CCVCMB_2021.tif")
knitr::opts_knit$set(root.dir = 'C:/Users/souch/Desktop/TP Teledec/TP/Sentinel2_neige')
SMOD_17 <- raster("SMOD_CCVCMB_2017.tif")
SMOD_18 <- raster("SMOD_CCVCMB_2018.tif")
SMOD_19 <- raster("SMOD_CCVCMB_2019.tif")
SMOD_20 <- raster("SMOD_CCVCMB_2020.tif")
SMOD_21 <- raster("SMOD_CCVCMB_2021.tif")
NDVImax.2020 <- max(rasters.2020.NDVI, na.rm=T)
NDVImax.2020 <- max(rasters.2020.NDVI, na.rm=T)
plot(NDVImax.2020)
NDVImax.2020_df <- as.matrix(rasters.2020)
NDVImax.2020_df <- as.matrix(rasters.2020)
NDVImax.2020_df <- as.matrix(rasters.2020.NDVI)
NDVImax.2020_df <- as.matrix(NDVImax.2020)
NDVImax.2017 <- max(rasters.2017.NDVI, na.rm=T)
plot(NDVImax.2017)
NDVImax.2017_df <- as.matrix(NDVImax.2017)
NDVImax.2017 <- max(rasters.2017.NDVI, na.rm=T)
plot(NDVImax.2017)
NDVImax.2017_df <- as.matrix(NDVImax.2017)
NDVImax.2018 <- max(rasters.2018.NDVI, na.rm=T)
plot(NDVImax.2018)
NDVImax.2018_df <- as.matrix(NDVImax.2018)
NDVImax.2019 <- max(rasters.2019.NDVI, na.rm=T)
plot(NDVImax.2019)
NDVImax.2019_df <- as.matrix(NDVImax.2019)
NDVImax.2020 <- max(rasters.2020.NDVI, na.rm=T)
plot(NDVImax.2020)
NDVImax.2020_df <- as.matrix(NDVImax.2020)
NDVImax.2021 <- max(rasters.2021.NDVI, na.rm=T)
plot(NDVImax.2021)
NDVImax.2021_df <- as.matrix(NDVImax.2021)
length(NDVImax.2017[which(!is.na(NDVImax.2017[]))])
length(NDVImax.2018[which(!is.na(NDVImax.2018[]))])
length(NDVImax.2019[which(!is.na(NDVImax.2019[]))])
length(NDVImax.2020[which(!is.na(NDVImax.2020[]))])
length(NDVImax.2021[which(!is.na(NDVImax.2021[]))])
NDVImax.2020<-mask(NDVImax.2020, NDVImax.2021)
NDVImax.2021<-mask(NDVImax.2021, NDVImax.2020)
NDVImax.2017<-mask(NDVImax.2017, NDVImax.2020)
NDVImax.2018<-mask(NDVImax.2018, NDVImax.2020)
NDVImax.2019<-mask(NDVImax.2019, NDVImax.2020)
length(NDVImax.2017[which(!is.na(NDVImax.2017[]))])
length(NDVImax.2018[which(!is.na(NDVImax.2018[]))])
length(NDVImax.2019[which(!is.na(NDVImax.2019[]))])
length(NDVImax.2020[which(!is.na(NDVImax.2020[]))])
length(NDVImax.2021[which(!is.na(NDVImax.2021[]))])
lenght_NDVI <-c(length(NDVImax.2017[which(!is.na(NDVImax.2017[]))]),
length(NDVImax.2018[which(!is.na(NDVImax.2018[]))]),
length(NDVImax.2019[which(!is.na(NDVImax.2019[]))]),
length(NDVImax.2020[which(!is.na(NDVImax.2020[]))]),
length(NDVImax.2021[which(!is.na(NDVImax.2021[]))]))
lenght_NDVI
NDVI2017 <- data.frame(NDVI2017=NDVImax.2017[which(!is.na(NDVImax.2017[]))])
NDVI2018 <- data.frame(NDVI2018=NDVImax.2018[which(!is.na(NDVImax.2018[]))])
NDVI2019 <- data.frame(NDVI2019=NDVImax.2019[which(!is.na(NDVImax.2019[]))])
NDVI2020 <- data.frame(NDVI2020=NDVImax.2020[which(!is.na(NDVImax.2020[]))])
NDVI2021 <- data.frame(NDVI2021=NDVImax.2021[which(!is.na(NDVImax.2021[]))])
NDVI_all <- as.matrix(cbind(NDVI2017,NDVI2018, NDVI2019, NDVI2020, NDVI2021))
NDVI_all
head(NDVI_all)
SMOD_17M <- mask(SMOD_17M, NDVI_18max)
SMOD_17M <- mask(SMOD_17, CCVCMB)
SMOD_18M<- mask(SMOD_18, CCVCMB)
SMOD_19M<- mask(SMOD_19, CCVCMB)
SMOD_20M<- mask(SMOD_20, CCVCMB)
SMOD_21M<- mask(SMOD_21, CCVCMB)
SMOD_17M <- mask(SMOD_17M, NDVImax.2017)
plot(NDVImax.2017)
SMOD_17M <- mask(SMOD_17M, NDVImax.2017)
SMOD_17 <- resample(x = SMOD_17, y = rasters.2020.NDVI[[1]], method = "bilinear")
SMOD_18 <- resample(x = SMOD_18, y = rasters.2020.NDVI[[1]], method = "bilinear")
SMOD_19 <- resample(x = SMOD_19, y = rasters.2020.NDVI[[1]], method = "bilinear")
SMOD_20 <- resample(x = SMOD_20, y = rasters.2020.NDVI[[1]], method = "bilinear")
SMOD_21 <- resample(x = SMOD_21, y = rasters.2020.NDVI[[1]], method = "bilinear")
SMOD_17M <- mask(SMOD_17, CCVCMB)
SMOD_18M<- mask(SMOD_18, CCVCMB)
SMOD_19M<- mask(SMOD_19, CCVCMB)
SMOD_20M<- mask(SMOD_20, CCVCMB)
SMOD_21M<- mask(SMOD_21, CCVCMB)
SMOD_17M <- mask(SMOD_17M, NDVImax.2017)
SMOD_18M<- mask(SMOD_18M, NDVImax.2017)
SMOD_19M<- mask(SMOD_19M, NDVImax.2017)
SMOD_20M<- mask(SMOD_20M, NDVImax.2017)
SMOD_21M<- mask(SMOD_21M, NDVImax.2017)
plot(NDVImax.2017)
SMOD_21M<- mask(SMOD_21M, NDVImax.2017Â°
SMOD_21M<- mask(SMOD_21M, NDVImax.2017)
lenght(SMOD_17M)
length(SMOD_17[which(!is.na(SMOD_17[]))]),
length(SMOD_17M[which(!is.na(SMOD_17[]))])
length(SMOD_17M[which(!is.na(SMOD_17M[]))])
length(SMOD_17M[which(!is.na(SMOD_17M[]))])
length(NDVImax.2017[which(!is.na(NDVImax.2017[]))])
NDVImax.2017 <- mask(NDVImax.2017, SMOD_17M)
length(NDVImax.2017)
length(NDVImax.2017[which(!is.na(NDVImax.2017[]))])
lenght_NDVI <-c(length(NDVImax.2017[which(!is.na(NDVImax.2017[]))]),
length(NDVImax.2018[which(!is.na(NDVImax.2018[]))]),
length(NDVImax.2019[which(!is.na(NDVImax.2019[]))]),
length(NDVImax.2020[which(!is.na(NDVImax.2020[]))]),
length(NDVImax.2021[which(!is.na(NDVImax.2021[]))]))
lenght_NDVI
NDVImax.2017 <- mask(NDVImax.2017, SMOD_17M)
NDVImax.2018 <- mask(NDVImax.2018, SMOD_17M)
NDVImax.2019 <- mask(NDVImax.2019, SMOD_17M)
NDVImax.2020 <- mask(NDVImax.2020, SMOD_17M)
NDVImax.2021 <- mask(NDVImax.2021, SMOD_17M)
lenght_NDVI <-c(length(NDVImax.2017[which(!is.na(NDVImax.2017[]))]),
length(NDVImax.2018[which(!is.na(NDVImax.2018[]))]),
length(NDVImax.2019[which(!is.na(NDVImax.2019[]))]),
length(NDVImax.2020[which(!is.na(NDVImax.2020[]))]),
length(NDVImax.2021[which(!is.na(NDVImax.2021[]))]))
lenght_NDVI
length_SMOD <-c(length(SMOD_17M[which(!is.na(SMOD_17M[]))]),
length(SMOD_17M[which(!is.na(SMOD_17M[]))]),
length(SMOD_17M[which(!is.na(SMOD_17M[]))]),
length(SMOD_17M[which(!is.na(SMOD_17M[]))]),
length(SMOD_17M[which(!is.na(SMOD_17M[]))]),
length(NDVImax.2017[which(!is.na(NDVImax.2017[]))]))
length_SMOD
length_SMOD <-c(length(SMOD_17M[which(!is.na(SMOD_17M[]))]),
length(SMOD_17M[which(!is.na(SMOD_17M[]))]),
length(SMOD_17M[which(!is.na(SMOD_17M[]))]),
length(SMOD_17M[which(!is.na(SMOD_17M[]))]),
length(SMOD_17M[which(!is.na(SMOD_17M[]))]))
length_SMOD
plot(SMOD_17)
plot(SMOD_17M)
NDVI.smod <- data.frame(SMOD17M = SMOD_17M[which(!is.na(SMOD_17M[]))], SMOD18M = SMOD_18M[which(!is.na(SMOD_18M[]))], SMOD19M = SMOD_19M[which(!is.na(SMOD_19M[]))], SMOD20M = SMOD_20M[which(!is.na(SMOD_20M[]))], SMOD21M = SMOD_21M[which(!is.na(SMOD_21M[]))])
View(NDVI.smod)
SMOD_all <- data.frame(SMOD17M = SMOD_17M[which(!is.na(SMOD_17M[]))], SMOD18M = SMOD_18M[which(!is.na(SMOD_18M[]))], SMOD19M = SMOD_19M[which(!is.na(SMOD_19M[]))], SMOD20M = SMOD_20M[which(!is.na(SMOD_20M[]))], SMOD21M = SMOD_21M[which(!is.na(SMOD_21M[]))])
NDVI_all <- as.matrix(cbind(NDVI2017,NDVI2018, NDVI2019, NDVI2020, NDVI2021))
NDVI2017=NDVImax.2017[which(!is.na(NDVImax.2017[]))])
NDVI_all <- data.frame(NDVI2017=NDVImax.2017[which(!is.na(NDVImax.2017[]))]),NDVI2018=NDVImax.2018[which(!is.na(NDVImax.2018[]))]),NDVI2019=NDVImax.2019[which(!is.na(NDVImax.2019[]))]),NDVI2020=NDVImax.2020[which(!is.na(NDVImax.2020[]))]),NDVI2021=NDVImax.2021[which(!is.na(NDVImax.2021[]))]))
NDVI_all <- data.frame(NDVI2017=NDVImax.2017[which(!is.na(NDVImax.2017[]))]),NDVI2018=NDVImax.2018[which(!is.na(NDVImax.2018[]))]),NDVI2019=NDVImax.2019[which(!is.na(NDVImax.2019[]))]),NDVI2020=NDVImax.2020[which(!is.na(NDVImax.2020[]))]),NDVI2021=NDVImax.2021[which(!is.na(NDVImax.2021[]))]))
NDVI_all <- data.frame(NDVI2017=NDVImax.2017[which(!is.na(NDVImax.2017[]))],NDVI2018=NDVImax.2018[which(!is.na(NDVImax.2018[]))],NDVI2019=NDVImax.2019[which(!is.na(NDVImax.2019[]))],NDVI2020=NDVImax.2020[which(!is.na(NDVImax.2020[]))],NDVI2021=NDVImax.2021[which(!is.na(NDVImax.2021[]))])
